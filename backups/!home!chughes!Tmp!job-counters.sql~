CREATE DATABASE job_data;

USE job_data;

CREATE TABLE corpus (
  id INT UNSIGNED AUTO_INCREMENT,
  name VARCHAR(256) NOT NULL,
  canonical_name VARCHAR(256) DEFAULT NULL,
  PRIMARY KEY (id)
);

INSERT INTO corpus (name) VALUES ('oef50');
INSERT INTO corpus (name) VALUES ('oef');
INSERT INTO corpus (name) VALUES ('wikilinks');
INSERT INTO corpus (name) VALUES ('wikilinks-part1');
INSERT INTO corpus (name) VALUES ('wikilinks-part2');
INSERT INTO corpus (name) VALUES ('moreover1m');

INSERT INTO corpus (name) VALUES ('moreover11m');
INSERT INTO corpus (name,canonical_name) VALUES ('1m','moreover1m');
INSERT INTO corpus (name,canonical_name) VALUES ('11m','moreover11m');
INSERT INTO corpus (name) VALUES ('clueweb60m');
INSERT INTO corpus (name,canonical_name) VALUES ('60m','clueweb60m');
INSERT INTO corpus (name) VALUES ('clueweb120m');
INSERT INTO corpus (name,canonical_name) VALUES ('120m','clueweb120m');

CREATE TABLE oozie_jobs (
  id MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT,
  workflow_name VARCHAR(256) NOT NULL,
  comment VARCHAR(1024) DEFAULT '',
  corpus_id INT UNSIGNED NOT NULL,
  no_nodes INT UNSIGNED NOT NULL,
  instance_type VARCHAR(256) NOT NULL,
  start_time BIGINT UNSIGNED NOT NULL,
  duration INT UNSIGNED NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE oozie_job_configuration (
  id INT AUTO_INCREMENT,
  job_id MEDIUMINT UNSIGNED NOT NULL,
  parameter_name VARCHAR(1024) NOT NULL,
  parameter_value TEXT NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE hadoop_jobs (
  id MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT,
  oozie_job_id MEDIUMINT UNSIGNED NOT NULL,
  hadoop_job_name VARCHAR(64) NOT NULL,
  iteration SMALLINT UNSIGNED DEFAULT 0,
  start_time BIGINT UNSIGNED NOT NULL,
  duration MEDIUMINT UNSIGNED NOT NULL,
  mapper_min_time MEDIUMINT UNSIGNED NOT NULL,
  mapper_avg_time MEDIUMINT UNSIGNED NOT NULL,
  mapper_max_time MEDIUMINT UNSIGNED NOT NULL,
  reducer_min_time MEDIUMINT UNSIGNED NOT NULL,
  reducer_avg_time MEDIUMINT UNSIGNED NOT NULL,
  reducer_max_time MEDIUMINT UNSIGNED NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE hadoop_job_counters (
  id INT AUTO_INCREMENT,
  hadoop_job_id MEDIUMINT UNSIGNED NOT NULL,
  counter_group VARCHAR(256) NOT NULL,
  counter_name VARCHAR(256) NOT NULL,
  counter_map_value BIGINT UNSIGNED NOT NULL,
  counter_reduce_value BIGINT UNSIGNED NOT NULL,
  counter_total_value BIGINT UNSIGNED NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE hadoop_job_configuration (
  id INT AUTO_INCREMENT,
  job_id MEDIUMINT UNSIGNED NOT NULL,
  parameter_name VARCHAR(1024) NOT NULL,
  parameter_value TEXT NOT NULL,
  PRIMARY KEY (id)
);
